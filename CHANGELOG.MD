# CHANGELOG

更新日志文档，版本顺序从新到旧，最新版本在最前(上)面。

# 0.3.0

## 新特性

- 文件系统重构，支持远端推送和拉取、文件分片加密
- 后台任务系统，专门处理文件推送和拉取等重任务
- 条目的所有剧集推送和拉取

## 控制台

- 对接服务端文件远端拉取和推送接口 #357

# 0.2.3

## 问题修复

- 删除插件异常 #343
- Bean不唯一异常 #332

# 0.2.2

## 服务端

- 添加新的Custom的事件监听
- 添加插件的事件广播

## 插件

- jellyfin插件支持生成媒体目录
- 番组计划插件添加代理配置

# 0.2.1

## 控制台

- 条目页面上的拓展点加载

## Web端

- 用thymeleaf构建了简单的条目展示页

## 服务端

- 新增条目优化，给插件提供拓展点。 #329
- 剧集和文件的批量匹配优化。#330
- 插件的自定义配置和信息展示功能完善 #331

## 插件

- 番组计划插件实现从番组计划拉取条目功能
- 本地文件批量导入数据库文件管理 #121

## Bug

- 插件详情页没有找到configmap的时候提示错误信息
- 已经导入的文件第二次启动重复导入
- 插件删除时针对插件的钩子方法调用报空指针
- 同步调用插件阻塞方法导致主线程不可访问

# 0.2.0

## 管理台

- 基于 Vue3 搭建基本骨架
- 加载核心模块(#312)
- 插件展示和启用停止

## 优化

- 较为灵活的底层模型(表)

## 新特性

- 服务端大重构
- 更为灵活的底层数据模型
- 自定义持久化模型
- 自定义持久化模型 CRUD 接口自动生成
- 插件模块支持功能扩展
- 插件模块支持配置自定义持久化模型
- 实现较为简单的文件上传查询和删除接口(大文件暂不支持)
- Subject(条目)的 CRUD 接口实现
- SubjectRelation(条目关系)的 CRUD 接口实现
- 合并 console 项目到主仓库 ikaros
- 调整项目为多模块结构
- 合并 app 和 rfcs 项目到主仓库 ikaros
- 系统配置信息的更新
- 用户信息和密码的更新
- 插件的安装卸载
- 文件的管理如展示上传移除查询等
- 条目剧集的展示和修改
- 后台全局查询条目和文件支持

## 依赖

- 引入 jacoco 统计测试覆盖率
- 从 servlet 切换到 webflux

## 组件

- 在 npm 官方仓库创建前端组件包@runikaros/shared

## 自动化编译

- 引入 codecev 自动进行测试覆盖率计算

## 安全

- 添加安全模块配置，支持默认的表单登录
- 添加最简基于角色的认证逻辑，用户的角色不是 Master 则无法访问 API

# 0.1.1

## Features

- 优化 Qbittorrent 完成后的种子的剧集匹配 #266

## Bugfix

- qbittorrent 配置无法正常更新 #259

## Documentations

- 更新并正式启用 RFC 文档仓库: https://github.com/ikaros-dev/rfcs

# 0.1.0-rc.2

## Features

- 关于老番支持，种子链接添加接口
- 关于老番支持，种子下载完成后，会在应用目录下的 original 目录硬链接原始的文件结构
- 应用启动前硬链接检查 #207
- 重构 Docker 镜像，增加 PUID PGID Umask 环境变量 #233
- 优化数据库表，去除重复的订阅表 #144
- 引入 flyway 规范 SQL 更改 #86
- 较为方便的导入已有的番剧的方式 #221

## Pages

- 种子链接添加页面

## Documentations

- 部署文档不使用默认端口 #208

## Bugfix

- 剧集文件名存在年份时序列匹配失败问题 #136
- original 目录的文件硬链接没有目录的问题
- Springboot3.0 邮件无法正常发送邮件 #215
- 多级目录无法创建服务端文件硬链接 #218
- Dockerfile 镜像，本地编译无法启动 #225
- 新番部分剧集直接跳过匹配了，导致收不到更新通知邮件 #230
- 旧镜像和新镜像的数据文件权限问题 #234
- 文件搜索，当关键词出现特殊符号时无法搜索 #224
- 文件上传未适配的取消接口请求 #91
- 和蜜柑计划不相关的请求 #245

## Dependencies

- 升级 SpringBoot 至 3.0
- 接口文档使用 springdoc-openapi #228

# 0.1.0-rc.1

## Features

- 添加剧集 URL 更新事件，当剧集 URL 字段更新时，给用户发送邮件通知用户番剧更新了
- 添加应用 URL 前缀环境变量
- 媒体目录会生成与剧集同名的已经上传的 ass 字幕文件，jellyfin 可自动识别

## Pages

- 用户信息更新页面，支持用户邮箱更新

## Bugfix

- 解析蜜柑计划 RSS 失败的问题
- 通知邮件无法包含日文内容的问题
- 通知邮件内容无法显示封面 URL 的问题
- 邮件 URL 的斜杠重复，导致无法访问资源 #188
- 邮件剧集文件名称不是视频类型的也进行更新了 #188
- 剧集和文件批量匹配失效 #191
- 特殊的番剧名称生成的媒体目录不正确问题，如 `Cyberpunk: Edgerunners` 生成的媒体目录成了 `_J1OWX~4` 原因是目录名不能有英文冒号

## Improvements

- 优化剧集 URL 更新时通知的代码逻辑，目前在拉取 qbittorrent 已完成下载的文件任务里，创建服务端对应的文件后，当匹配到对应的剧集
  URL 时，会给用户发送通知邮件
- 通知邮件内容，加上剧集 URL 的文件名称

# 0.1.0-beta.2

## Features

- 添加用户更新接口
- 添加用户密码更新接口
- 添加系统通知的邮件方式的配置
- 添加邮件测试接口
- 分离订阅进度和特征资源更新功能
- 添加动漫批量订阅接口

## Pages

- 添加用户设置页，对接服务端用户更新接口和密码更新接口
- 添加了 Ikaros 的 Logo 页面对应的地方
- 添加邮件配置页面和邮件测试页面，并对接服务端
- 移除页面上的特征资源
- 添加针对动漫的批量订阅功能

## Documentations

- 添加了 Ikaros 的 Logo，并更新了 Readme 文档

# 0.1.0-beta.1

## Features

- 添加动漫订阅接口，包括订阅的进度
- 添加动漫花园资源查询接口
- 添加特征资源匹配下载的定时任务

## Improvements

- 给资源查询添加内存缓存集合，降低对动漫花园的无效重复请求

## Bugfix

- 添加根据关键词查询动漫花园资源接口，修复问题：如果通过番组计划的中文查不到资源，则无法正常订阅 #147
- 给剧集服务根据季度 ID 的查询结果添加了按照序号进行排序的逻辑，修复问题：动漫详情页根据剧集序号的表格需要进行排序 #135
- 动漫列表页，选择其它页数后，无法进行更新列表 #152

## Pages

- 完善动漫详情页，并对接服务端
- 对接动漫资源查询接口，完善动漫详情页订阅流程

## Documentations

- 创建微信公众号，更新 readme 文档，添加官方平台汇总和微信公众号信息

<hr>

# 2022.12

- 切换默认数据库为 postgresql

# 2022.11

- 优化数据库表结构
- 初始化 APP 仓库
- 初始化官网仓库
- 番剧管理的接口开发
- 番剧管理的 Web 管理端页面开发
- 系统配置项的接口开发和 Web 管理端页面开发
- Web 管理端大文件分片上传
- 多主题的简单支持
- 初始化默认的最简主题
- Qbittorrent Web Api 部分接口的封装
- 初步的 RSS 解析
- 初步完成半自动追番
- 半自动追番调试和问题修复，初步可用
- 优化设置项，存储到数据库
- 优化第三方客户端的配置及后台页面系统配置管理
- 修复 GitHub 模板 URL 指向不正确的问题
- 系统配置从环境变量和配置文件移至后台管理页面，的情况下的自动追番调试
- 添加音乐模块的 entity 层和 service 层
- 优化媒体目录生成，jellyfin 可直接识别
- 修复后台开启番组计划和蜜柑计划 HTTP 代理不生效的问题
- 使用事件解耦配置更新和 RestTemplate 重载
- 更换证书为 AGPL3.0
- 更新 README.MD 文档
- 优化生成媒体目录逻辑，从应用数据里生成而不是直接从下载好的 torrent 文件生成
- 优化生成媒体目录，添加剧集文件生成，和生成剧集文件名优化
- 添加 Docker 容器部署指导文档
- 优化 Web 端 admin 操作体验 #70
- 修复 Web 端动漫列表错误问题
- Web 端 admin 添加动漫详情页
- 优化 Web 端 admin 剧集单集匹配和批量匹配
- 初步优化 README 文档
- 实现通过 QB 官方文档内 Cookies 认证的方式调用 Qbittorrent Web API

# PR #44

- 番剧管理的相关开发
- 番剧管理的页面及初步对接后端
- 服务端的接口实现以及调整

# old

## Features

- 给 github feature issue 模板添加 PR 输入框
- 调整 github pr 模板内容的顺序
- 实现了文件的简单上传下载
- 实现了数据模型的初步建立
- 实现了剧集的增删改查
